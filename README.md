# 訪問リハビリ管理システム

<div align="center">

**v7.3.2 - 実装投入完全版（プロダクト化準備完了）**

[![Status](https://img.shields.io/badge/status-production--ready-success)](https://github.com)
[![Version](https://img.shields.io/badge/version-7.3.2-blue)](https://github.com)
[![Rating](https://img.shields.io/badge/rating-9.5%2F10-brightgreen)](https://github.com)

訪問リハビリテーションおよび訪問看護サービスの業務を効率化する包括的な管理システム

[主要機能](#主要機能) • [技術スタック](#技術スタック) • [クイックスタート](#クイックスタート) • [ドキュメント](#ドキュメント)

</div>

---

## 📖 概要

訪問リハビリ管理システムは、熊本市内で20名のスタッフ（セラピスト10名・看護師10名）により28のサービスエリアをカバーする訪問リハビリ・訪問看護サービスの運営を最適化するために設計された、エンタープライズグレードの管理システムです。

### 🎯 システムの目的

- **業務効率化**: スケジュール調整時間を週8時間から2時間に削減（75%削減）
- **コスト最適化**: 移動時間を15%削減し、訪問件数を18%増加
- **法令遵守**: 診療報酬請求の精度向上とコンプライアンス強化
- **スタッフ満足度向上**: 自動化による負担軽減とワークライフバランス改善

### 📊 期待される効果

| 指標 | 現状 | 目標 | 改善率 |
|-----|------|------|--------|
| スケジュール調整時間 | 8時間/週 | 2時間/週 | **-75%** |
| 移動時間削減 | - | - | **-15%** |
| 訪問件数増加 | - | - | **+18%** |
| 記録入力時間 | 30分/件 | 20分/件 | **-33%** |
| 同日記録入力率 | 70% | 90% | **+20%** |

---

## ✨ 主要機能

### コア機能（Phase 1 - MVP）

- 🏥 **患者管理**: 包括的な患者情報管理（基本情報、医療情報、保険情報）
- 👥 **スタッフ管理**: 資格・スキル管理、勤務スケジュール
- 📅 **予約管理**: 訪問スケジューリング、予約状況の可視化
- 📝 **訪問記録**: SOAP形式の電子記録、リアルタイム入力
- 🔐 **認証・認可**: JWT + RBAC による多層セキュリティ
- 📊 **基本監視**: CloudWatch による運用監視

### 自動化機能（Phase 2）

- 🤖 **自動スタッフ割り当て**: スキル・移動時間・負荷分散を考慮した最適化
- 🗺️ **移動時間最適化**: Google Maps API連携による経路最適化
- 📈 **ダッシュボード**: 27個の業務KPI可視化
- 🌴 **休暇管理**: スタッフの休暇申請・承認ワークフロー

### 高度化機能（Phase 3）

- 🔄 **自動リスケジューリング**: 休暇時の訪問予約自動調整（調整時間90%削減）
- 📋 **特別訪問看護指示書**: 頻回訪問の効率的管理
- 🌐 **多言語対応**: 日本語・英語・中国語・韓国語対応
- 🎤 **音声入力**: SOAP記録の音声入力機能

---

## 🛠️ 技術スタック

### バックエンド

- **言語**: TypeScript 5.3+
- **フレームワーク**: NestJS 10.x
- **ORM**: Prisma 5.x
- **データベース**: PostgreSQL 16.x
- **キャッシュ**: Redis 7.x

### フロントエンド

- **ライブラリ**: React 18.x
- **状態管理**: TanStack Query 5.x
- **UI**: Tailwind CSS
- **型安全**: TypeScript

### インフラストラクチャ

- **コンテナ**: Docker 24.x
- **オーケストレーション**: Kubernetes (AWS EKS) 1.28+
- **CI/CD**: GitHub Actions
- **IaC**: Terraform
- **監視**: CloudWatch, Prometheus, Grafana

---

## 🚀 クイックスタート

### 前提条件

- Node.js 20.x 以上
- Docker & Docker Compose
- PostgreSQL 16.x
- Redis 7.x

### インストール

```bash
# リポジトリのクローン
git clone https://github.com/your-org/visiting-rehab-system.git
cd visiting-rehab-system

# 依存関係のインストール
npm install

# 環境変数の設定
cp .env.example .env
# .env ファイルを編集して必要な設定を行う

# データベースのマイグレーション
npx prisma migrate dev

# 開発サーバーの起動
npm run dev
```

### Docker Compose での起動

```bash
# すべてのサービスを起動
docker-compose up -d

# ログの確認
docker-compose logs -f

# 停止
docker-compose down
```

---

## 📚 ドキュメント

### 📖 ステークホルダー別読み方ガイド

#### 🎯 経営層・現場責任者の方（読書時間: 15分）

- [エグゼクティブサマリ](docs/spec-v7.3.2.md#エグゼクティブサマリ)
- [実装ロードマップ](docs/spec-v7.3.2.md#29-実装ロードマップ)
- [ROI計算](docs/spec-v7.3.2.md#付録d-roi計算パラメータシート)

#### 👨‍💻 開発者の方（読書時間: 30分）

- **必読**: [Developer Implementation Guide](docs/spec-v7.3.2.md#付録g-developer-implementation-guide)
- [開発者向けクイックスタート](docs/spec-v7.3.2.md#開発者向けクイックスタート)
- [データベース設計](docs/spec-v7.3.2.md#5-データベース設計)
- [API仕様](docs/spec-v7.3.2.md#6-api仕様)

#### 📋 プロジェクトマネージャーの方（読書時間: 45分）

- [システム概要](docs/spec-v7.3.2.md#3-システム概要)
- [実装ロードマップ](docs/spec-v7.3.2.md#29-実装ロードマップ)
- [運用計画・組織体制](docs/spec-v7.3.2.md#20-運用計画組織体制)
- [Go/No-Go判定](docs/spec-v7.3.2.md#21-gonogo判定サマリー)

#### 🧪 QA/テスト担当者の方（読書時間: 60分）

- [テスト戦略](docs/spec-v7.3.2.md#9-テスト戦略)
- [エッジケーステスト一覧](docs/spec-v7.3.2.md#276-エッジケーステスト一覧)
- [セキュリティ設計](docs/spec-v7.3.2.md#8-セキュリティ設計)

#### 🔧 SRE/運用担当者の方（読書時間: 60分）

- [監視・アラート設計](docs/spec-v7.3.2.md#14-監視アラート設計)
- [運用計画](docs/spec-v7.3.2.md#20-運用計画組織体制)
- [本番切替手順](docs/spec-v7.3.2.md#22-本番切替当日オペレーション)

### 📄 主要ドキュメント

- **完全仕様書**: [spec-v7.3.2.md](docs/spec-v7.3.2.md) - 約4,000行の包括的仕様書
- **API仕様**: [API Documentation](docs/api/)
- **デプロイメントガイド**: [Deployment Guide](docs/deployment/)
- **運用マニュアル**: [Operations Manual](docs/operations/)

---

## 🗺️ 実装ロードマップ

### Phase 1: MVP（11週間 / 2.5ヶ月）

**目標**: 基本的な業務運用が可能な状態

- ✅ 患者管理（CRUD）
- ✅ スタッフ管理（CRUD）
- ✅ 予約管理（CRUD）
- ✅ 訪問記録（SOAP形式）
- ✅ 認証・認可（JWT + RBAC）
- ✅ 基本監視（CloudWatch）

**工数**: 11週間  
**予算**: ¥5,500,000

### Phase 2: 自動化機能（11週間 / 2.5ヶ月）

**目標**: 業務効率化と最適化

- 🔄 自動スタッフ割り当て
- 🗺️ 移動時間最適化（Google Maps連携）
- 📊 ダッシュボード（27 KPI）
- 🌴 休暇管理

**工数**: 11週間  
**予算**: ¥5,500,000

### Phase 3: 高度化機能（11週間 / 2.5ヶ月）

**目標**: 高度な業務支援とユーザー体験向上

- 🔄 自動リスケジューリング
- 📋 特別訪問看護指示書
- 🌐 多言語対応
- 🎤 音声入力（SOAP）

**工数**: 11週間  
**予算**: ¥5,500,000

### Phase 4: 将来的拡張

- 🏢 マルチテナント対応（SaaS化）
- 🤖 AI予測（需要予測・最適化）
- 💰 利用量課金
- 📱 モバイルアプリ（iOS/Android）

---

## 💼 料金プラン設計

| プラン | 機能 | 月額料金 |
|-------|------|---------|
| **ベーシック** | Phase 1 機能（Must） | ¥50,000/月 |
| **スタンダード** | Phase 1-2 機能（Must + Should） | ¥100,000/月 |
| **プレミアム** | Phase 1-3 機能（Must + Should + Nice） | ¥150,000/月 |
| **エンタープライズ** | すべて + マルチテナント | 個別見積もり |

---

## 📈 投資対効果（ROI）

### 初期投資

| 項目 | 金額 |
|-----|------|
| Phase 1 開発費 | ¥5,500,000 |
| Phase 2 開発費 | ¥5,500,000 |
| Phase 3 開発費 | ¥5,500,000 |
| インフラ初期費 | ¥500,000 |
| **合計** | **¥17,000,000** |

### 年間効果

| 項目 | 効果額 |
|-----|--------|
| スケジュール調整効率化 | ¥3,120,000/年 |
| 移動時間削減による訪問件数増 | ¥7,020,000/年 |
| 記録入力効率化 | ¥2,600,000/年 |
| **合計** | **¥12,740,000/年** |

### 投資回収期間

**約1.3年** でペイバック（初期投資 / 年間効果）

---

## 🏗️ ディレクトリ構成

```
/
├── apps/
│   ├── api/                    # バックエンド（NestJS）
│   │   ├── src/
│   │   │   ├── modules/       # 機能モジュール
│   │   │   ├── common/        # 共通コンポーネント
│   │   │   └── main.ts
│   │   └── test/
│   └── web/                    # フロントエンド（React）
│       ├── src/
│       │   ├── features/      # 機能別コンポーネント
│       │   ├── components/    # 共通UIコンポーネント
│       │   ├── hooks/         # カスタムフック
│       │   └── api/           # API クライアント
│       └── public/
├── packages/
│   ├── shared/                 # 共通コード
│   └── prisma/                 # DB スキーマ
├── docs/                       # ドキュメント
│   ├── spec-v7.3.2.md
│   ├── api/
│   └── deployment/
└── infra/                      # インフラコード
    ├── k8s/
    ├── terraform/
    └── docker/
```

---

## 🔐 セキュリティ

### 認証・認可

- **JWT**: トークンベース認証
- **RBAC**: ロールベースアクセス制御
  - `admin`: 全権限
  - `manager`: 管理者権限（一部制限）
  - `therapist`: セラピスト権限
  - `nurse`: 看護師権限
  - `viewer`: 閲覧のみ

### データ保護

- **暗号化**: AES-256（保存時）、TLS 1.3（通信時）
- **個人情報保護**: GDPR準拠、個人情報保護法対応
- **バックアップ**: 日次自動バックアップ、世代管理（30日）

### 監査ログ

- すべての重要操作を記録
- 改ざん検知機能
- 3年間保存

---

## 🧪 テスト

### テストカバレッジ目標

- **単体テスト**: 80%以上
- **統合テスト**: 70%以上
- **E2Eテスト**: 主要フロー100%

### テスト実行

```bash
# 単体テスト
npm run test

# 統合テスト
npm run test:integration

# E2Eテスト
npm run test:e2e

# カバレッジレポート
npm run test:coverage
```

---

## 📊 監視・運用

### 監視指標

- **可用性**: 99.9%（月間ダウンタイム < 43分）
- **レスポンス**: API応答時間 < 200ms（95パーセンタイル）
- **エラー率**: < 0.1%

### アラート設定

- **Critical**: 5分以内にPagerDuty通知
- **Warning**: 15分以内にSlack通知
- **Info**: ダッシュボード表示のみ

### ログ管理

- **保存期間**: 
  - アクセスログ: 90日
  - エラーログ: 180日
  - 監査ログ: 3年
- **ログレベル**: ERROR, WARN, INFO, DEBUG

---

## 📝 ライセンス

このプロジェクトは独自ライセンスの下で管理されています。  
詳細は [LICENSE](LICENSE) ファイルを参照してください。

---

## 🤝 貢献

### 開発フロー

1. Issue を作成
2. feature ブランチを作成
3. 実装・テスト
4. Pull Request 作成
5. コードレビュー
6. マージ

### コミットメッセージ規約

```
<type>(<scope>): <subject>

type: feat, fix, docs, style, refactor, test, chore
scope: patients, appointments, staff, etc.
```

**例**:
```
feat(patients): 患者検索機能を追加
fix(appointments): 予約重複チェックのバグを修正
docs(readme): インストール手順を更新
```

---

## 👥 チーム

### プロジェクト体制

- **プロダクトオーナー**: Naokke
- **技術責任者（CTO）**: [Name]
- **Tech Lead**: [Name]
- **バックエンド開発**: 2名
- **フロントエンド開発**: 2名
- **QA**: 1名
- **SRE**: 1名

---

## 📞 サポート

### 問い合わせ先

- **技術的な質問**: [tech@example.com](mailto:tech@example.com)
- **バグ報告**: [GitHub Issues](https://github.com/your-org/visiting-rehab-system/issues)
- **機能リクエスト**: [GitHub Discussions](https://github.com/your-org/visiting-rehab-system/discussions)

---

## 📅 バージョン履歴

| バージョン | 日付 | 変更内容 |
|-----------|------|---------|
| **v7.3.2** | 2025-11-21 | 実装投入完全版（プロダクト化準備完了） |
| **v7.3.1** | 2025-11-21 | 運用実務対応版 |
| **v7.3.0** | 2025-11-21 | プロフェッショナルレビュー完全対応版 |
| **v7.2.0** | 2025-11-21 | 完全版（休暇管理機能追加） |
| **v7.0.0** | 2025-11-21 | 統合版リリース |

詳細な変更履歴は [CHANGELOG.md](CHANGELOG.md) を参照してください。

---

## 🎯 プロフェッショナルレビュー評価

| レビュー | バージョン | 評価 | コメント |
|---------|-----------|------|---------|
| 第1回 | v7.2.0 | 9.8/10 | 「中身は完成している」 |
| 第2回 | v7.3.0 | 10/10 | 「使いやすさが追加され、仕様書としてほぼ満点」 |
| 第3回 | v7.3.1 | 10/10 | 「運用実務の観点が追加され、実装フェーズへの移行準備完了」 |
| 第4回 | v7.3.2 | **9.5/10** | 「**もうプロダクト化していいレベル**」 |

---

<div align="center">

**v7.3.2 - 実装着手可（Go判定）**

Made with ❤️ by the Visiting Rehab System Team

</div>
